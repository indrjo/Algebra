% !TEX program = lualatex

\documentclass[ structure = article
              %, pagelayout = compact
              , maketitlestyle = standard
              , secstyle = center
              , secfont = roman
              , liststyle = aligned
              ]{suftesi}

\newenvironment{tcbenum}
  {\begin{enumerate}[leftmargin=*]}
  {\end{enumerate}}

\newenvironment{tcbitem}
  {\begin{itemize}[leftmargin=*]}
  {\end{itemize}}

\usepackage[no-math]{fontspec}
\usepackage[rm,tt=false]{libertine}
%\setmainfont{Linux Libertine O}

\usepackage{polyglossia}
\setmainlanguage[variant=uk]{english}

\usepackage[english=british]{csquotes}
\newcommand\q\enquote

\usepackage{hyperref}
\hypersetup{breaklinks,hidelinks}

\usepackage{ libertinust1math
           , MnSymbol
           , extarrows
           , amsthm
           }
\usepackage[bb=ams]{mathalfa}

\newcounter{mycounter}
\counterwithin{mycounter}{section}
\theoremstyle{definition}
\newtheorem{definition}[mycounter]{Definition}
\newtheorem{lemma}[mycounter]{Lemma}
\newtheorem{proposition}[mycounter]{Proposition}
\newtheorem{corollary}[mycounter]{Corollary}
\newtheorem{note}[mycounter]{Note}
\newtheorem{example}[mycounter]{Example}
\newtheorem{exercise}[mycounter]{Exercise}

\usepackage[skins,theorems,breakable]{tcolorbox}
\tcbset{ enhanced
       , breakable
       , blanker
       , oversize
       }

\tcolorboxenvironment{definition}
  { tile
  , top=4pt
  , bottom=4pt
  , left=4pt
  , right=4pt
  , borderline={1pt}{0pt}{gray!65!black}
  , colback=gray!20!white
  }
\tcolorboxenvironment{lemma}
  { tile
  , top=6pt
  , bottom=6pt
  , left=6pt
  , right=6pt
  , borderline={1pt}{0pt}{gray!65!black}
  , colback=gray!10!white
  }
\tcolorboxenvironment{proposition}
  { tile
  , top=6pt
  , bottom=6pt
  , left=6pt
  , right=6pt
  , borderline={1pt}{0pt}{gray!65!black}
  , colback=gray!10!white
  }
\tcolorboxenvironment{corollary}
  { tile
  , top=6pt
  , bottom=6pt
  , left=6pt
  , right=6pt
  , borderline={1pt}{0pt}{gray!65!black}
  , colback=gray!10!white
  }
\tcolorboxenvironment{proof}
  { left=6pt
  , borderline west={1pt}{0mm}{gray!65!black}
  }
\tcolorboxenvironment{example}
  { top=6pt
  , bottom=6pt
  , borderline north={1pt}{0mm}{gray!65!black}
  , borderline south={1pt}{0mm}{gray!65!black}
  }

\renewcommand\theequation{\thesection.\arabic{equation}}

\usepackage{tikz}
\usetikzlibrary{ calc
               , babel
               , cd
               }
\tikzcdset{ row sep/normal=.7cm
          , column sep/normal=.7cm
          , arrow style=tikz
          , diagrams={>={To[length=3.5pt,width=4pt]}}
          , shorten=-2pt
          }

\setcounter{section}{-1}
